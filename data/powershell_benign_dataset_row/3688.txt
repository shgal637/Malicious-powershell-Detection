function Test-InvitationCrud{$resourceGroup = getAssetNametry{$AccountName = getAssetName$ShareName = getAssetName$InvitationName = getAssetName$targetEmail = "test@microsoft.com"$createdInvitation = New-AzDataShareInvitation -AccountName $AccountName -ResourceGroupName $resourceGroup -ShareName $ShareName -Name $InvitationName -TargetEmail $targetEmailAssert-NotNull $createdInvitationAssert-AreEqual $InvitationName $createdInvitation.NameAssert-AreEqual "test@microsoft.com" $createdInvitation.TargetEmailAssert-AreEqual "Pending" $createdInvitation.InvitationStatus$retrievedInvitation = Get-AzDataShareInvitation -AccountName $AccountName -ResourceGroupName $resourceGroup -ShareName $ShareName -Name $InvitationNameAssert-NotNull $retrievedInvitationAssert-AreEqual $InvitationName $retrievedInvitation.NameAssert-AreEqual "Pending" $retrievedInvitation.InvitationStatus$removed = Remove-AzDataShareInvitation -AccountName $AccountName -ResourceGroupName $resourceGroup -ShareName $ShareName -Name $InvitationName -PassThruAssert-True { $removed }Assert-ThrowsContains { Get-AzDataShareInvitation -AccountName $AccountName -ResourceGroupName $resourceGroup -ShareName $ShareName -Name $InvitationName} "Resource 'sdktestinginvitation' does not exist"}finally{Remove-AzResourceGroup -Name $resourceGroup -Force}}