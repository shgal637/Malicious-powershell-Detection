function Test-ListUsageDetails{$usageDetails = Get-AzConsumptionUsageDetail -Top 10Assert-NotNull $usageDetailsAssert-AreEqual 10 $usageDetails.CountForeach($usage in $usageDetails){Assert-NotNull $usage.AccountNameAssert-Null $usage.AdditionalPropertiesAssert-NotNull $usage.BillingPeriodIdAssert-NotNull $usage.ConsumedServiceAssert-NotNull $usage.CostCenterAssert-NotNull $usage.CurrencyAssert-NotNull $usage.DepartmentNameAssert-NotNull $usage.IdAssert-NotNull $usage.InstanceIdAssert-NotNull $usage.InstanceLocationAssert-NotNull $usage.InstanceNameAssert-NotNull $usage.IsEstimatedAssert-Null $usage.MeterDetailsAssert-NotNull $usage.MeterIdAssert-NotNull $usage.NameAssert-NotNull $usage.PretaxCostAssert-NotNull $usage.ProductAssert-NotNull $usage.SubscriptionGuidAssert-NotNull $usage.SubscriptionName	Assert-NotNull $usage.TypeAssert-NotNull $usage.UsageEndAssert-NotNull $usage.UsageQuantityAssert-NotNull $usage.UsageStart}}function Test-ListUsageDetailsWithMeterDetailsExpand{$usageDetails = Get-AzConsumptionUsageDetail -Expand MeterDetails -Top 10Foreach($usage in $usageDetails){Assert-NotNull $usage.AccountNameAssert-Null $usage.AdditionalPropertiesAssert-NotNull $usage.BillingPeriodIdAssert-NotNull $usage.ConsumedServiceAssert-NotNull $usage.CostCenterAssert-NotNull $usage.CurrencyAssert-NotNull $usage.DepartmentNameAssert-NotNull $usage.IdAssert-NotNull $usage.InstanceIdAssert-NotNull $usage.InstanceLocationAssert-NotNull $usage.InstanceNameAssert-NotNull $usage.IsEstimatedAssert-NotNull $usage.MeterDetailsAssert-NotNull $usage.MeterIdAssert-NotNull $usage.NameAssert-NotNull $usage.PretaxCostAssert-NotNull $usage.ProductAssert-NotNull $usage.SubscriptionGuidAssert-NotNull $usage.SubscriptionName	Assert-NotNull $usage.TypeAssert-NotNull $usage.UsageEndAssert-NotNull $usage.UsageQuantityAssert-NotNull $usage.UsageStart}}function Test-ListUsageDetailsWithDateFilter{$usageDetails = Get-AzConsumptionUsageDetail -StartDate 2017-10-02 -EndDate 2017-10-05 -Top 10Assert-AreEqual 10 $usageDetails.CountForeach($usage in $usageDetails){Assert-NotNull $usage.AccountNameAssert-Null $usage.AdditionalPropertiesAssert-NotNull $usage.BillingPeriodIdAssert-NotNull $usage.ConsumedServiceAssert-NotNull $usage.CostCenterAssert-NotNull $usage.CurrencyAssert-NotNull $usage.DepartmentNameAssert-NotNull $usage.IdAssert-NotNull $usage.InstanceIdAssert-NotNull $usage.InstanceLocationAssert-NotNull $usage.InstanceNameAssert-NotNull $usage.IsEstimatedAssert-Null $usage.MeterDetailsAssert-NotNull $usage.MeterIdAssert-NotNull $usage.NameAssert-NotNull $usage.PretaxCostAssert-NotNull $usage.ProductAssert-NotNull $usage.SubscriptionGuidAssert-NotNull $usage.SubscriptionName	Assert-NotNull $usage.TypeAssert-NotNull $usage.UsageEndAssert-NotNull $usage.UsageQuantityAssert-NotNull $usage.UsageStart}}function Test-ListBillingPeriodUsageDetails{$usageDetails = Get-AzConsumptionUsageDetail -BillingPeriodName 201710 -Top 10Assert-AreEqual 10 $usageDetails.CountForeach($usage in $usageDetails){Assert-NotNull $usage.AccountNameAssert-Null $usage.AdditionalPropertiesAssert-NotNull $usage.BillingPeriodIdAssert-NotNull $usage.ConsumedServiceAssert-NotNull $usage.CostCenterAssert-NotNull $usage.CurrencyAssert-NotNull $usage.DepartmentNameAssert-NotNull $usage.IdAssert-NotNull $usage.InstanceIdAssert-NotNull $usage.InstanceLocationAssert-NotNull $usage.InstanceNameAssert-NotNull $usage.IsEstimatedAssert-Null $usage.MeterDetailsAssert-NotNull $usage.MeterIdAssert-NotNull $usage.NameAssert-NotNull $usage.PretaxCostAssert-NotNull $usage.ProductAssert-NotNull $usage.SubscriptionGuidAssert-NotNull $usage.SubscriptionName	Assert-NotNull $usage.TypeAssert-NotNull $usage.UsageEndAssert-NotNull $usage.UsageQuantityAssert-NotNull $usage.UsageStart}}function Test-ListBillingPeriodUsageDetailsWithFilterOnInstanceName{$usageDetails = Get-AzConsumptionUsageDetail -BillingPeriodName 201710 -InstanceName 1c2052westus -Top 10Foreach($usage in $usageDetails){Assert-NotNull $usage.AccountNameAssert-Null $usage.AdditionalPropertiesAssert-NotNull $usage.BillingPeriodIdAssert-NotNull $usage.ConsumedServiceAssert-NotNull $usage.CostCenterAssert-NotNull $usage.CurrencyAssert-NotNull $usage.DepartmentNameAssert-NotNull $usage.IdAssert-NotNull $usage.InstanceIdAssert-NotNull $usage.InstanceLocationAssert-NotNull $usage.InstanceNameAssert-AreEqual "1c2052westus" $usage.InstanceNameAssert-NotNull $usage.IsEstimatedAssert-Null $usage.MeterDetailsAssert-NotNull $usage.MeterIdAssert-NotNull $usage.NameAssert-NotNull $usage.PretaxCostAssert-NotNull $usage.ProductAssert-NotNull $usage.SubscriptionGuidAssert-NotNull $usage.SubscriptionName	Assert-NotNull $usage.TypeAssert-NotNull $usage.UsageEndAssert-NotNull $usage.UsageQuantityAssert-NotNull $usage.UsageStart}}function Test-ListBillingPeriodUsageDetailsWithDateFilter{$usageDetails = Get-AzConsumptionUsageDetail -BillingPeriodName 201710 -StartDate 2017-10-19 -Top 10Assert-AreEqual 10 $usageDetails.CountForeach($usage in $usageDetails){Assert-NotNull $usage.AccountNameAssert-Null $usage.AdditionalPropertiesAssert-NotNull $usage.BillingPeriodIdAssert-NotNull $usage.ConsumedServiceAssert-NotNull $usage.CostCenterAssert-NotNull $usage.CurrencyAssert-NotNull $usage.DepartmentNameAssert-NotNull $usage.IdAssert-NotNull $usage.InstanceIdAssert-NotNull $usage.InstanceLocationAssert-NotNull $usage.InstanceNameAssert-NotNull $usage.IsEstimatedAssert-Null $usage.MeterDetailsAssert-NotNull $usage.MeterIdAssert-NotNull $usage.NameAssert-NotNull $usage.PretaxCostAssert-NotNull $usage.ProductAssert-NotNull $usage.SubscriptionGuidAssert-NotNull $usage.SubscriptionName	Assert-NotNull $usage.TypeAssert-NotNull $usage.UsageEndAssert-NotNull $usage.UsageQuantityAssert-NotNull $usage.UsageStart}}