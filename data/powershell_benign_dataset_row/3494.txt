function Test-DefaultResourceGroup{$rgname = Get-ResourceGroupNameClear-AzDefault -ResourceGrouptry{$output = Get-AzDefaultAssert-Null($output)$output = Get-AzDefault -ResourceGroupAssert-Null($output)$storedValue = (Get-AzContext).ExtendedProperties["Default Resource Group"]Assert-Null($storedValue)$output = Set-AzDefault -ResourceGroupName $rgname -Force$resourcegroup = Get-AzResourceGroup -Name $rgnameAssert-AreEqual $output.Name $resourcegroup.ResourceGroupName$context = Get-AzContext$storedValue = $context.ExtendedProperties["Default Resource Group"]Assert-AreEqual $storedValue $output.Name$output = Get-AzDefaultAssert-AreEqual $output.Name $resourceGroup.ResourceGroupName$output = Get-AzDefault -ResourceGroupAssert-AreEqual $output.Name $resourceGroup.ResourceGroupNameClear-AzDefault -Force$output = Get-AzDefaultAssert-Null($output)$context = Get-AzContext$storedValue = $context.ExtendedProperties["Default Resource Group"]Assert-Null($storedValue)$output = Set-AzDefault -ResourceGroupName $rgnameAssert-AreEqual $output.Name $resourcegroup.ResourceGroupName$context = Get-AzContext$storedValue = $context.ExtendedProperties["Default Resource Group"]Assert-AreEqual $storedValue $output.NameClear-AzDefault -ResourceGroup$output = Get-AzDefaultAssert-Null($output)$context = Get-AzContext$storedValue = $context.ExtendedProperties["Default Resource Group"]Assert-Null($storedValue)}finally{Clean-ResourceGroup($rgname)}}function Get-ResourceGroupName{return getAssetName}function Clean-ResourceGroup($rgname){if ([Microsoft.Azure.Test.HttpRecorder.HttpMockServer]::Mode -ne [Microsoft.Azure.Test.HttpRecorder.HttpRecorderMode]::Playback) {Remove-AzResourceGroup -Name $rgname -Force}}