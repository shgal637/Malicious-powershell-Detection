function Test-ComputeNodeUserEndToEnd{param([string]$poolId, [string]$computeNodeId)$context = New-Object Microsoft.Azure.Commands.Batch.Test.ScenarioTests.ScenarioTestContext$userName = "userendtoend"$password1 = ConvertTo-SecureString "Password1234!" -AsPlainText -ForceNew-AzBatchComputeNodeUser -PoolId $poolId -ComputeNodeId $computeNodeId -Name $userName -Password $password1 -BatchContext $context$password2 = ConvertTo-SecureString "Abcdefghijk1234!" -AsPlainText -ForceSet-AzBatchComputeNodeUser $poolId $computeNodeId $userName $password2 -ExpiryTime ([DateTime]::Now.AddDays(5)) -BatchContext $contextRemove-AzBatchComputeNodeUser -PoolId $poolId -ComputeNodeId $computeNodeId -Name $userName -BatchContext $contextAssert-Throws { Remove-AzBatchComputeNodeUser -PoolId $poolId -ComputeNodeId $computeNodeId -Name $userName -BatchContext $context }}