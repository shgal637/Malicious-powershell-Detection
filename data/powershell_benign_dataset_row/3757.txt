function Test-CreateIntegrationAccountPartner{$resourceGroup = TestSetup-CreateResourceGroup$integrationAccountName = "IA-" + (getAssetname)$integrationAccount = TestSetup-CreateIntegrationAccount $resourceGroup.ResourceGroupName $integrationAccountName $integrationAccountPartnerName = getAssetname$integrationAccountPartnerName1 = getAssetname$businessIdentities = @(("01","Test1"),("02","Test2"),("As2Identity","Test3"),("As2Identity","Test4"))$businessIdentities1 = @(("As2Identity","Test4"))$integrationAccountPartner =  New-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerName -PartnerType "B2B" -BusinessIdentities $businessIdentitiesAssert-AreEqual $integrationAccountPartnerName $integrationAccountPartner.Name$integrationAccountPartner1 =  New-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerName1 -BusinessIdentities $businessIdentities1Assert-AreEqual $integrationAccountPartnerName1 $integrationAccountPartner1.NameRemove-AzIntegrationAccount -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -Force}function Test-GetIntegrationAccountPartner{$resourceGroup = TestSetup-CreateResourceGroup$integrationAccountName = "IA-" + (getAssetname)$integrationAccount = TestSetup-CreateIntegrationAccount $resourceGroup.ResourceGroupName $integrationAccountName $integrationAccountPartnerName = getAssetname$businessIdentities = @(("ZZ","AA"),("XX","GG"))$integrationAccountPartner =  New-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerName -PartnerType "B2B" -BusinessIdentities $businessIdentitiesAssert-AreEqual $integrationAccountPartnerName $integrationAccountPartner.Name$result =  Get-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerNameAssert-AreEqual $integrationAccountPartnerName $result.Name$result1 =  Get-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountNameAssert-True { $result1.Count -gt 0 }	Remove-AzIntegrationAccount -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -Force}function Test-ListIntegrationAccountPartner{$resourceGroup = TestSetup-CreateResourceGroup$integrationAccountName = "IA-" + (getAssetname)$integrationAccount = TestSetup-CreateIntegrationAccount $resourceGroup.ResourceGroupName $integrationAccountName $businessIdentities = @(("ZZ","AA"),("XX","GG"))$val=0while($val -ne 1){$val++ ;$integrationAccountPartnerName = getAssetnameNew-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerName -PartnerType "B2B" -BusinessIdentities $businessIdentities}$result =  Get-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountNameAssert-True { $result.Count -eq 1 }Remove-AzIntegrationAccount -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -Force}function Test-RemoveIntegrationAccountPartner{$resourceGroup = TestSetup-CreateResourceGroup$integrationAccountName = "IA-" + (getAssetname)$integrationAccount = TestSetup-CreateIntegrationAccount $resourceGroup.ResourceGroupName $integrationAccountName$integrationAccountPartnerName = getAssetname$businessIdentities = @(("ZZ","AA"),("XX","GG"))$integrationAccountPartner =  New-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerName -PartnerType "B2B" -BusinessIdentities $businessIdentitiesAssert-AreEqual $integrationAccountPartnerName $integrationAccountPartner.NameRemove-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerName -Force	Remove-AzIntegrationAccount -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -Force}function Test-UpdateIntegrationAccountPartner{$resourceGroup = TestSetup-CreateResourceGroup$integrationAccountName = "IA-" + (getAssetname)$integrationAccount = TestSetup-CreateIntegrationAccount $resourceGroup.ResourceGroupName $integrationAccountName$integrationAccountPartnerName = getAssetname$businessIdentities = @(("ZZ","AA"),("SS","FF"))$businessIdentities1 = @(("CC","VV"))$integrationAccountPartner =  New-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerName -BusinessIdentities $businessIdentitiesAssert-AreEqual $integrationAccountPartnerName $integrationAccountPartner.Name$integrationAccountPartnerUpdated = Set-AzIntegrationAccountPartner -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -PartnerName $integrationAccountPartnerName -BusinessIdentities $businessIdentities1	-ForceAssert-AreEqual $integrationAccountPartnerName $integrationAccountPartnerUpdated.NameRemove-AzIntegrationAccount -ResourceGroupName $resourceGroup.ResourceGroupName -IntegrationAccountName $integrationAccountName -Force}