function Test-ListMarketplaces{$marketplaces = Get-AzConsumptionMarketplace -Top 10Assert-NotNull $marketplacesAssert-AreEqual 10 $marketplaces.CountForeach($mkp in $marketplaces){Assert-NotNull $mkp.BillingPeriodIdAssert-NotNull $mkp.ConsumedQuantityAssert-NotNull $mkp.CurrencyAssert-NotNull $mkp.IdAssert-NotNull $mkp.InstanceIdAssert-NotNull $mkp.InstanceNameAssert-NotNull $mkp.IsEstimatedAssert-NotNull $mkp.NameAssert-NotNull $mkp.OrderNumberAssert-NotNull $mkp.PretaxCostAssert-NotNull $mkp.ResourceRateAssert-NotNull $mkp.SubscriptionGuidAssert-NotNull $mkp.TypeAssert-NotNull $mkp.UsageEndAssert-NotNull $mkp.UsageStart}}function Test-ListMarketplacesWithDateFilter{$marketplaces = Get-AzConsumptionMarketplace -StartDate 2018-01-03 -EndDate 2018-01-20 -Top 10Assert-NotNull $marketplacesAssert-AreEqual 10 $marketplaces.CountForeach($mkp in $marketplaces){Assert-NotNull $mkp.BillingPeriodIdAssert-NotNull $mkp.ConsumedQuantityAssert-NotNull $mkp.CurrencyAssert-NotNull $mkp.IdAssert-NotNull $mkp.InstanceIdAssert-NotNull $mkp.InstanceNameAssert-NotNull $mkp.IsEstimatedAssert-NotNull $mkp.NameAssert-NotNull $mkp.OrderNumberAssert-NotNull $mkp.PretaxCostAssert-NotNull $mkp.ResourceRateAssert-NotNull $mkp.SubscriptionGuidAssert-NotNull $mkp.TypeAssert-NotNull $mkp.UsageEndAssert-NotNull $mkp.UsageStart}}function Test-ListBillingPeriodMarketplaces{$marketplaces = Get-AzConsumptionMarketplace -BillingPeriodName 201801-1 -Top 10Assert-NotNull $marketplacesAssert-AreEqual 10 $marketplaces.CountForeach($mkp in $marketplaces){Assert-NotNull $mkp.BillingPeriodIdAssert-NotNull $mkp.ConsumedQuantityAssert-NotNull $mkp.CurrencyAssert-NotNull $mkp.IdAssert-NotNull $mkp.InstanceIdAssert-NotNull $mkp.InstanceNameAssert-NotNull $mkp.IsEstimatedAssert-NotNull $mkp.NameAssert-NotNull $mkp.OrderNumberAssert-NotNull $mkp.PretaxCostAssert-NotNull $mkp.ResourceRateAssert-NotNull $mkp.SubscriptionGuidAssert-NotNull $mkp.TypeAssert-NotNull $mkp.UsageEndAssert-NotNull $mkp.UsageStart}}function Test-ListMarketplacesWithFilterOnInstanceName{$marketplaces = Get-AzConsumptionMarketplace -InstanceName TestVM -Top 10Assert-NotNull $marketplacesAssert-AreEqual 10 $marketplaces.CountForeach($mkp in $marketplaces){Assert-NotNull $mkp.BillingPeriodIdAssert-NotNull $mkp.ConsumedQuantityAssert-NotNull $mkp.CurrencyAssert-NotNull $mkp.IdAssert-NotNull $mkp.InstanceIdAssert-NotNull $mkp.InstanceNameAssert-NotNull $mkp.IsEstimatedAssert-NotNull $mkp.NameAssert-NotNull $mkp.OrderNumberAssert-NotNull $mkp.PretaxCostAssert-NotNull $mkp.ResourceRateAssert-NotNull $mkp.SubscriptionGuidAssert-NotNull $mkp.TypeAssert-NotNull $mkp.UsageEndAssert-NotNull $mkp.UsageStart}}